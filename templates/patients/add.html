{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Add Patient - Ethiopian Hospital ERP{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h3 mb-0">Add New Patient</h1>
        <p class="text-muted">Register a new patient in the system</p>
    </div>
    <div>
        <a href="{% url 'patients:patient_list' %}" class="btn btn-outline-secondary">
            <i class="fas fa-arrow-left me-2"></i>Back to Patients
        </a>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="dashboard-card">
            <h5 class="card-title mb-4">Patient Information</h5>
            
            <form method="post" data-validate="true">
                {% csrf_token %}
                
                <!-- Personal Information -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-ethiopia-green mb-3">
                            <i class="fas fa-user me-2"></i>Personal Information
                        </h6>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="first_name" name="first_name" required>
                            <label for="first_name">First Name *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="last_name" name="last_name" required>
                            <label for="last_name">Last Name *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
                            <label for="date_of_birth">Date of Birth *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <select class="form-select" id="gender" name="gender" required>
                                <option value="">Select Gender</option>
                                <option value="M">Male</option>
                                <option value="F">Female</option>
                                <option value="O">Other</option>
                            </select>
                            <label for="gender">Gender *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <select class="form-select" id="blood_type" name="blood_type">
                                <option value="">Select Blood Type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                            <label for="blood_type">Blood Type</label>
                        </div>
                    </div>
                </div>

                <!-- Address Information -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-ethiopia-green mb-3">
                            <i class="fas fa-map-marker-alt me-2"></i>Address Information
                        </h6>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="kebele" name="kebele" required>
                            <label for="kebele">Kebele *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="woreda" name="woreda" required>
                            <label for="woreda">Woreda *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <select class="form-select" id="city" name="city" required>
                                <option value="">Select City</option>
                                <option value="Addis Ababa">Addis Ababa</option>
                                <option value="Bahir Dar">Bahir Dar</option>
                                <option value="Mekelle">Mekelle</option>
                                <option value="Hawassa">Hawassa</option>
                                <option value="Dire Dawa">Dire Dawa</option>
                                <option value="Gondar">Gondar</option>
                                <option value="Adama">Adama</option>
                                <option value="Jimma">Jimma</option>
                            </select>
                            <label for="city">City *</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <select class="form-select" id="region" name="region" required>
                                <option value="">Select Region</option>
                                <option value="Addis Ababa">Addis Ababa</option>
                                <option value="Amhara">Amhara</option>
                                <option value="Tigray">Tigray</option>
                                <option value="SNNP">SNNP</option>
                                <option value="Oromia">Oromia</option>
                                <option value="Somali">Somali</option>
                                <option value="Afar">Afar</option>
                                <option value="Benishangul-Gumuz">Benishangul-Gumuz</option>
                                <option value="Gambela">Gambela</option>
                                <option value="Harari">Harari</option>
                                <option value="Dire Dawa">Dire Dawa</option>
                            </select>
                            <label for="region">Region *</label>
                        </div>
                    </div>
                </div>

                <!-- Contact Information -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-ethiopia-green mb-3">
                            <i class="fas fa-phone me-2"></i>Contact Information
                        </h6>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="tel" class="form-control" id="phone" name="phone" data-phone required>
                            <label for="phone">Phone Number *</label>
                            <div class="form-text">Format: +251 91 234 5678</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="email" name="email">
                            <label for="email">Email Address</label>
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-ethiopia-green mb-3">
                            <i class="fas fa-exclamation-triangle me-2"></i>Emergency Contact
                        </h6>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating mb-3">
                            <input type="text" class="form-control" id="emergency_contact_name" name="emergency_contact_name" required>
                            <label for="emergency_contact_name">Contact Name *</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating mb-3">
                            <input type="tel" class="form-control" id="emergency_contact_phone" name="emergency_contact_phone" data-phone required>
                            <label for="emergency_contact_phone">Contact Phone *</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-floating mb-3">
                            <select class="form-select" id="emergency_contact_relationship" name="emergency_contact_relationship" required>
                                <option value="">Select Relationship</option>
                                <option value="Spouse">Spouse</option>
                                <option value="Parent">Parent</option>
                                <option value="Child">Child</option>
                                <option value="Sibling">Sibling</option>
                                <option value="Friend">Friend</option>
                                <option value="Other">Other</option>
                            </select>
                            <label for="emergency_contact_relationship">Relationship *</label>
                        </div>
                    </div>
                </div>

                <!-- Medical Information -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h6 class="text-ethiopia-green mb-3">
                            <i class="fas fa-notes-medical me-2"></i>Medical Information
                        </h6>
                    </div>
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="medical_history" name="medical_history" style="height: 100px"></textarea>
                            <label for="medical_history">Medical History</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="allergies" name="allergies" style="height: 80px"></textarea>
                            <label for="allergies">Known Allergies</label>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <textarea class="form-control" id="current_medications" name="current_medications" style="height: 80px"></textarea>
                            <label for="current_medications">Current Medications</label>
                        </div>
                    </div>
                </div>

                <!-- Submit Buttons -->
                <div class="d-flex gap-2 justify-content-end">
                    <a href="{% url 'patients:patient_list' %}" class="btn btn-outline-secondary">
                        <i class="fas fa-times me-2"></i>Cancel
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save me-2"></i>Save Patient
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="col-lg-4">
        <div class="dashboard-card">
            <h6 class="text-ethiopia-green mb-3">
                <i class="fas fa-info-circle me-2"></i>Information
            </h6>
            <div class="alert alert-info">
                <h6><i class="fas fa-lightbulb me-2"></i>Tips</h6>
                <ul class="mb-0 small">
                    <li>Fields marked with * are required</li>
                    <li>Patient ID will be auto-generated</li>
                    <li>Use Ethiopian phone format: +251 91 234 5678</li>
                    <li>Emergency contact is mandatory for safety</li>
                </ul>
            </div>
            
            <div class="alert alert-warning">
                <h6><i class="fas fa-shield-alt me-2"></i>Privacy</h6>
                <p class="mb-0 small">All patient information is confidential and protected under Ethiopian medical privacy laws.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
